{% extends "basic/layout.html" %}

{# Silence the sidebar's, relbar's #}
{% block header %}{% endblock %}
{% block relbar1 %}{% endblock %}
{% block relbar2 %}{% endblock %}
{% block sidebarsourcelink %}{% endblock %}

{% set debug = false %}
{% set theme_css_files = [
    'http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css',
    '_static/dnn.styles.css'
  ]
%}

{% set css_files = css_files + theme_css_files %}

{% set script_files = script_files + [
    'http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js',
    '_static/dnn.theme.js'
  ]
%}

{%- set rendersidebar = (not embedded) and sidebars and (pagename not in theme_hide_sidebar) %}

{% macro navBar() %}
{% include "navbar.html" %}
{% endmacro %}

{%- macro bsidebar() %}
    {%- if rendersidebar %}
    <nav class="doc-nav-wrapper">
        {%- for sidebartemplate in sidebars %}
          {%- include sidebartemplate %}
        {%- endfor %}
	</nav>
    {%- endif %}
{%- endmacro %}

{%- block doctype -%}
<!DOCTYPE html>
{%- endblock %}

{%- block extrahead %}
    <meta charset='utf-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <meta name="apple-mobile-web-app-capable" content="yes">

    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-2243389-4', 'auto');
        ga('send', 'pageview');

    </script>
{% endblock %}

{%- block content %}
{{ navBar() }}

{% if debug == true %}
<pre style="margin-top: 60px">
    Embedded: {{embedded}}
    Sidebars: {{sidebars}}
    PageName: {{pagename}}
    HideSidebar: {{theme_hide_sidebar}}
    Show: {{ pagename not in theme_hide_sidebar }}
    Render: {{(not embedded) and sidebars and (pagename not in theme_hide_sidebar)}}
    Render Sidebar: {{ rendersidebar }}
    Debug: {{debug}}
</pre>
{% endif %}

{% if rendersidebar %} 
<main class="main-body doc-main-body">
    {%- block sidebar1 %}{{ bsidebar() }}{% endblock %}
    <section class="doc-wrapper">
        <div class="doc">
            {% include "breadcrumbs.html" %}
{% else %}
<main class="main-body">
    <div class="container-fluid">
{% endif %}

{% block body %}{% endblock %}

{% if rendersidebar %}
        </div>
        <nav class="article-nav-wrapper">
            {{ toc }}
            {% block sidebar2 %}{% endblock %}         
        </nav>
    </section>
</main>
{% else %}
    </div>
</main>
{% endif %}
{%- endblock %}

{%- block footer %}
{% include "footer.html" %}
{%- endblock %}
